union IntResult { Ok { value: Int }, Err { error: String } }

: is-ok? ( IntResult -- Int )
    variant.tag 0 =
;

: is-err? ( IntResult -- Int )
    variant.tag 1 =
;

: success ( Int -- IntResult )
    Make-Ok
;

: failure ( String -- IntResult )
    Make-Err
;

: test-ok ( -- )
    42 success is-ok?
    test.assert
;

: test-err ( -- )
    "oops" failure is-err?
    test.assert
;
